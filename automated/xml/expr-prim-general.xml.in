<?xml version="1.0"?>
<parsers>
  
  <Or name="primary-expression">
    <Ref target="literal"/>
    <Ref target="id-expression"/>
  </Or>
  
  <Or name="id-expression">
    <Ref target="qualified-id"/>
    <Ref target="unqualified-id"/>
  </Or>

  <Ref name="unqualified-id" target="identifier"/>

  <Or name="qualified-id">
    <And>
      <Optional>
	<Literal>::</Literal>
      </Optional>
      <Ref target="nested-name-specifier"/>
      <Optional>
	<Literal>template</Literal>
      </Optional>
      <Ref target="unqualified-id"/>
    </And>
  </Or>
  
  <Or name="nested-name-specifier-final">
    <And>
      <Ref target="identifier"/>
      <Literal>::</Literal>
    </And>
    <!-- <And> -->
    <!--   <Optional> -->
    <!-- 	<Literal>template</Literal> -->
    <!--   </Optional> -->
    <!--   <Ref target="simple-template-id"/> -->
    <!--   <Literal>::</Literal> -->
    <!-- </And> -->
  </Or>
  
  <Or name="nested-name-specifier">
    <ZeroOrMore>
      <And>
	<Or>
	  <Ref target="type-name"/>
	  <!-- <Ref target="namespace-name"/> -->
	  <!-- <Ref target="decltype-name"/> -->
	</Or>
	<Literal>::</Literal>
	<!-- <FollowedBy> -->
	<!--   <Ref target="nested-name-specifier-final"/> -->
	<!-- </FollowedBy> -->
      </And>
    </ZeroOrMore>
    <Ref target="nested-name-specifier-final"/>
  </Or>
</parsers>
